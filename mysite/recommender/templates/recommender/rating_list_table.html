{% extends 'recommender/base.html' %}

{%load static%}

{% load widget_tweaks %}
{% load django_tables2 %}

{% block content %}
<div class="row">
{% if filter %}
    <div class="col-2">
    <!--        TODO: level off the buttons, fix text input hanging out of the div-->
    <form action="" method="get" class="form form-inline">
        <!--        TODO: redo this line so that I don't have to use widget tweaks custom placeholder class-->

            {% render_field filter.form.movie__title placeholder="Search by title" class="form-control" %}
        <button type="submit" class="btn btn-outline-primary btn-block">Search</button>
        {% for input in filter.form.movie__year_released %}
                    {% if forloop.counter0|divisibleby:2 %}<div class="d-flex justify-content-center"><div class="btn-group btn-group-toggle" data-toggle="buttons">{% endif %}
                              <label class="btn btn-outline-primary">  {{ input}}</label>
                    {% if forloop.counter0|add:"1"|divisibleby:2 %}</div></div>{% endif %}
        {% endfor %}
        {% for input in filter.form.value %}
                    {% if forloop.counter0|divisibleby:2 %}<div class="d-flex justify-content-center"><div class="btn-group btn-group-toggle" data-toggle="buttons">{% endif %}
                              <label class="btn btn-outline-primary">  {{ input}}</label>
                    {% if forloop.counter0|add:"1"|divisibleby:2 %}</div></div>{% endif %}
        {% endfor %}

        {{filter.form.date_from}}
        {{filter.form.date_to}}
        <button type="submit" class="btn btn-outline-primary btn-block">Filter</button>
        <a class="btn btn-outline-danger btn-block" href="{%url 'profile' profile_owner.username%}">Clear</a>
        <a class="btn btn-primary btn-block" href="{%url 'user_stats' profile_owner.username%}">Stats</a>
    </form>
    </div>
{% endif %}
<div class="col-10">
    {% render_table table %}
</div>
</div>
{% endblock content %}
